<ion-content>
  <ng-container *ngIf="track">
    <app-header [headerTitle]= "track.name" ></app-header>
    <!-- <div>
        <div class="main-container--with-header">
          <div class="track__header">
            <img src="{{track.images ? (track.images[0] | checkImgUrl) : '' | checkImgUrl}}" alt="" class="track-header__avatar">
            <div class="track__status">
              <div class="track__status__circle" style="background-color: {{track.is_work ? 'var(--green-color)' : 'var(--red-color)'}}"></div>
              {{track.is_work ? 'Работает' : 'Закрыто'}}
            </div>
        </div>
          <div *ngIf="false" class="track__params">
            <div class="track__params__item">
                Длина: {{track.length}}
            </div>
            <div class="track__params__item">
              Повороты: {{track.turns}}
            </div>
            <div class="track__params__item">
              Сложность: <span>{{track.level.name}}</span>
            </div>
          </div>
          
      </div>
      
        <div *ngIf="track.images" (click)="openImagesModalFunction()" class="track__files">
            <app-horizontal-swiper [files]="track.images"> </app-horizontal-swiper>
        </div>

        <app-images-modal *ngIf="track.images" [openModal]="statusImagesModal" (closeModalEmit)="closeImagesModal()" [imagesPathArray]="track.images"></app-images-modal>


        <div class="track__info main-container">
          <div class="specifications">
            <div class="standart-heading">О треке</div>
             <div class="specifications__item">
              <div class="specifications__item__title">Вход на трек</div>
              <div class="specifications__item__value">{{track.free ? 'Бесплатный' : 'Платный'}}</div>
            </div> 
            @for (specification of track.spec; track $index) {
              <div class="specifications__item">
                <div class="specifications__item__title">{{specification.title}}</div>
                <div class="specifications__item__value">{{specification.value}}</div>
              </div>
            }
          </div>
          <div *ngIf="track.additionalServices" class="additional-services">
            <div class="standart-heading">Дополнительные сервисы</div>
            <div class="additional-services__grid">
              
              @for (service of track.additionalServices; track $index) {
                <div class="additional-services__item">
                  <img [src]="service.ico" class="additiobal-services__item__ico">
                  <div class="additional-services__item__value">{{service.value}}</div>
                </div>
              }
              
            </div>
          
          </div>
          <div *ngIf="track.desc" class="description">
            <div class="standart-heading">Описание трека</div> 
            <div [innerHTML]="clearDescription()" class="description__text">{{track.desc}}</div>
          </div>

          <div class="map">
             <div class="standart-heading">На карте</div> 
            <div class="map__container">
              <ya-map
              [center]="[track.latitude,track.longitude,]"
              [zoom]="12"   
              [state]="{controls: []}"
              [options]="{
                yandexMapDisablePoiInteractivity: true,
                suppressMapOpenBlock: true,
                suppressObsoleteBrowserNotifier: true,
                autoFitToViewport: 'always',
              }">
              <ya-placemark [geometry]="[track.latitude,track.longitude,]"></ya-placemark>
              </ya-map>
            </div>
            <div class="map__address">
              {{track.address}}
            </div>
            <div class="map__open-button">
              <app-standart-button buttonText="Проложить маршрут" (onClick) = "goToPoint()"></app-standart-button>
            </div>
          </div>
        </div>
    </div> -->
            <!-- <app-images-modal odal *ngIf="track.images" [openModal]="statusImagesModal" (closeModalEmit)="closeImagesModal()" [imagesPathArray]="track.images"></app-images-modal> -->

    <!-- <img src="{{track.images ? (track.images[0] | checkImgUrl) : '' | checkImgUrl}}" alt="" class="track-header__avatar"> -->

    <div class="main-container--with-header">
      <div class="track__header">
        <img src="{{track.schema_img| checkImgUrl}}" alt="" class="track-header__avatar">
        <div class="track__header__params">
          <app-circle-button *ngIf="this.track.light" icon='/assets/icons/lamp.svg'></app-circle-button>
          <app-circle-button *ngIf="this.track.seasons" icon='/assets/icons/snow.svg'></app-circle-button>
        </div>
      </div>

      <div class="list-track-parametrs">

        <div class="name-track-parametrs">
          <span>Параметры трека</span>
        </div>
        <div class="parametrs">




          <div class="parametr">
            <div class="left-flang">
            <div class="icon-lenght"><img src="/assets/icons/length.png" alt="" class="arrow-icon"></div>
            <div class="name"><span>Длина трассы</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("lengthTrack")}}</div>
            <div class="information"> <app-info-popover  text="полная длина круга трассы"></app-info-popover></div>
          </div>
          </div>
          
          
          <div class="parametr">
            <div class="left-flang">
            <div class="icon"><img src="/assets/icons/coverage.svg" alt="" class="arrow-icon"></div>
            <div class="name"><span>Тип покрытия</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("coverage")}}</div>
            <div class="information"><app-info-popover  text="какое покрытие большую часть времени, летом, преобладает на трассе"></app-info-popover></div>
          </div>
          </div>


          <div class="parametr">
            <div class="left-flang">
            <div class="icon"><img src="/assets/icons/heigth.svg" alt="" class="arrow-icon"></div>
            <div class="name"><span>Перепад высот</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("heightDifference")}}</div>
            <div class="information"><app-info-popover  text="расстояние в метрах от самой низкой точки до самой высокой точке на трассе"></app-info-popover></div>
          </div>
          </div>


          <div class="parametr">
            <div class="left-flang">
            <div class="icon"><img src="/assets/icons/left-arr.svg" alt="" class="arrow-icon"></div>
            <div class="name"><span>Левых поворотов</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("leftTurns")}}</div>
          </div>
          </div>


          <div class="parametr">
            <div class="left-flang">
            <div class="icon"><img src="/assets/icons/right-arr.svg" alt="" class="arrow-icon"></div>
            <div class="name"><span>Правых поворотов</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("rightTurns")}}</div>
          </div>
          </div>


          <div class="parametr">
            <div class="left-flang">
            <div class="icon"><img src="/assets/icons/elements-list.svg" alt="" class="arrow-icon"></div>
            <div class="name"><span>Количество элементов</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("heightDifference")}}</div>
          </div>
          </div>


          <div class="parametr">
            <div class="left-flang">
            <div class="icon-lenght"><img src="/assets/icons/speed.svg" alt="" class="arrow-icon"></div>
            <div class="name"><span>Длина самого <br> скоростного участка</span></div>
          </div>
          <div class="right-flang">
            <div class="result">{{getSpecValue("highSpeedSection")}}</div>
            <div class="information"><app-info-popover  text="длина в метрах прямого участка трассы, на котором можно использовать максимальную скорость"></app-info-popover></div>
          </div>
          </div>

          
        </div>

      </div>

      <!-- <div class="video-container">
        <div class="name-track-parametrs">
          <span>Видео круга</span>
        </div>

        <div class="video">
          <img src="/assets/images/gopro-moto.webp" alt="" class="track-gopro">
        </div>
      </div> -->

      <div *ngIf="track.desc" class="description">
        <span class="name-track-parametrs">Описание трека</span> 
        <div [innerHTML]="clearDescription()" class="description__text">{{track.desc}}</div>
      </div>

      <!-- <div class="sponsors-container">
        <div class="name-track-parametrs">
          <span>Спонсоры</span>
        </div>

        <div class="tape-sponsors">
          <div class="tape-sponsors__item">

          </div>
          <div class="tape-sponsors__item">

          </div>
          <div class="tape-sponsors__item">

          </div>
          <div class="tape-sponsors__item">

          </div>
          <div class="tape-sponsors__item">

          </div>
        </div>
      </div> -->

      <!-- <div class="gallery-container">
        <div class="name-track-parametrs">
          <span>Фото архив</span>
        </div>
        <div class="tape-gallery">
          <div class="tape-gallery__item"></div>
          <div class="tape-gallery__item"></div>
          <div class="tape-gallery__item"></div>
          <div class="tape-gallery__item"></div>
          <div class="tape-gallery__item"></div>
          <div class="tape-gallery__item"></div>
          <div class="tape-gallery__item"></div>
        </div>
      </div> -->

      <footer>
        
        <div class="map">
          <div class="map__address">
           {{track.address}}
         </div>
         <div class="map__container">
           <ya-map
           [center]="[track.latitude,track.longitude,]"
           [zoom]="12"   
           [state]="{controls: []}"
           [options]="{
             yandexMapDisablePoiInteractivity: true,
             suppressMapOpenBlock: true,
             suppressObsoleteBrowserNotifier: true,
             autoFitToViewport: 'always',
           }">
           <ya-placemark [geometry]="[track.latitude,track.longitude,]"></ya-placemark>
           </ya-map>
         </div>
         
         
       </div>

       <div class="requisites-and-link-container">
        <div class="requisites">
          <span class="req-name">Реквизиты</span>
          <p class="req-text">Обучение мотокроссу детей и начинающих. Трассы с трамплинами и гонки по бездорожью для профессионалов</p>
          <div class="req-button">
          <app-standart-button [buttonText]="'Доступ к треку'" [theme]="'orange'">
          </app-standart-button>
        </div>
        </div>
        <div class="links-list">
          <span class="link-name">
            Ссылки на медиа
          </span>
          <div class="links">
            <div class="link">
              <img src="/assets/icons/VK2.svg" alt="">
            </div>
            <div class="link">
              <img src="/assets/icons/telegram.svg" alt="">
            </div>
            <div class="link">
              <img src="/assets/icons/watsapp.svg" alt="">
            </div>
            <div class="link">
              <img src="/assets/icons/sait.svg" alt="">
            </div>
          </div>
        </div>
       </div>

      </footer>

    </div>

  </ng-container>
</ion-content>

  


