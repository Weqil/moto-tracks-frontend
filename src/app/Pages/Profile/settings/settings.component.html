<ion-content>
  <app-header headerTitle="Настройки профиля">

  </app-header>
  
  <main class="main-container--with-header">
    
    <div class="document-container">
      <div class="up-container">
        <div class="user-section__avatar">
          <img (click)="file.click()" class="user-section__avatar__img" [src]="settingsAvatar" alt="" >
          <input (change)="setAvatar($event)" #file style="display: none;" accept="image/png, image/jpeg"   type="file">
          <span class="user_id">UID {{user?.id}}</span>   
          <div class="">
            <img class="edit-btn" (click)="file.click()" [src]="'/assets/icons/edit-img.svg'" >
          </div>
        </div>

        <div class="user-name-container">
          <div class="user_name">{{user?.personal?.name}} {{user?.personal?.surname}}</div>
        </div>
        
       
      </div>

      <div class="email-container">
        <app-standart-input [readonly]="true" class="email-control" [control]="personalViewForm.get('emailView')" [errorMessage]="formErrors.email.errorMessage"  label="Email"></app-standart-input>
        <div class="status-email" [ngClass]="{'status-email-green':emailStatus}"></div>
        <app-circle-button class="edit-btn" [icon]="'/assets/icons/edit.svg'" (click)="openEmailModal()"></app-circle-button>
      </div>

      <div class="email-container">
        <app-standart-input [readonly]="true" class="email-control" [control]="personalViewForm.get('phoneView')" [errorMessage]="formErrors.phone.errorMessage"  label="Телефон"></app-standart-input>
        <div class="status-phone" [ngClass]="{'status-phone-green':phoneStatus}"></div>
        <app-circle-button class="edit-btn" [icon]="'/assets/icons/edit.svg'" (click)="openPhoneModal()"></app-circle-button>
      </div>

      

      <div class="status-container">
        <span class="span-text">Смена роли:</span>
        <div class="cabinet__select-status">
          <app-custom-selected [items]="statuses" [modalValue]="statusesSelect" [selectedValue]="selectedStatusItem" (openModal)="openSelectedStatus()" (closeModal)="closeSelectedStatus()" (selectItem)="selectStatus($event)"></app-custom-selected>
        </div>
      </div>

      <ion-modal class="agreed-modal" [isOpen]="userAgreedModalState" (didDismiss)="closeModalAgreedNotVerificated()">
          <ng-template>
              <ion-content>
                <div class="agreed-select__main">
                   <label class="agreed" name="agreed">Подтверждаю что ознакомлен и согласен с политикой для гонщика и организатора</label>
                  <div class="user-agreed">
                    <span (click)="navigateInAgreed()">Пользовательское соглашение</span>
                    <ion-checkbox (ionChange)="changeAgreedState($event)"  for="agreed" class="agreed-select-status-checkbox"></ion-checkbox>
                  </div>
                  <div class="button-conteiner">
                    <app-standart-button (click)="closeStateAgreedModal()" [disabled]="disabledAgreedButton" buttonText="Продолжить"></app-standart-button>
                  </div>
                </div>
              </ion-content>
          </ng-template>
      </ion-modal>
    
    </div>   
    <div class="buttons-wrapper">

      <app-standart-button (click)="submitEditForm();" buttonText="Сохранить"></app-standart-button>
      <div class="cabinet__delete_account">
        <app-standart-button (click)="deleteAccount();"  theme="red" buttonText="Удалить учетную запись"></app-standart-button>
      </div>
    </div>
 
    
  </main>
</ion-content>

<ion-modal [isOpen]="emailModalValue"  (didDismiss)="closeEmailModal()">
  <ng-template>
    <ion-content>

        <div class="verificate-email-container" >
          <div class="email-title-container">
              <span class="verificate-email-title">Вам поступит код для подтверджения почты по указанному адресу:</span>
          </div>
          <app-standart-input class="email-control" [control]="personalSettingsForm.get('email')" [errorMessage]="formErrors.email.errorMessage" placeholder="Введите адрес электронной почты" label="Email"></app-standart-input>
          
          <div class="button-edit-email">
            <app-standart-button class="button-edit-email" [buttonText]="'Изменить'" (click)="editEmail()"></app-standart-button>
          </div>

          <div class="button-confirm-email">
              <app-standart-button class="button-confirm-email" [buttonText]="'Подтвердить текущую'" (click)="confirmEmail()"></app-standart-button>
          </div>
        </div>
       
    </ion-content>
  </ng-template>
  
</ion-modal>


<ion-modal [isOpen]="phoneModalValue" class="phone-modal" (didDismiss)="closePhoneModal()">
  <ng-template>
    <ion-content>

        <div class="verificate-phone-container" >
          <div class="email-title-container">
              <span class="verificate-email-title">При нажатии на кнопку вы перейдете в окно верификаии номера телефона</span>
          </div>

          <div class="button-confirm-phone">
              <app-standart-button class="button-confirm-phone" [buttonText]="'Подтвердить'" (click)="confirmPhone()"></app-standart-button>
          </div>
        </div>
       
    </ion-content>
  </ng-template>
  
</ion-modal>