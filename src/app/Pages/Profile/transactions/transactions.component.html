<ion-content>
  <app-header headerTitle="Мои покупки"></app-header>
  
  <main class="main-container--with-header">
    <div class="transactions-container">
      <div *ngIf="transactions.length === 0" class="no-transactions">
        У вас пока нет транзакций
      </div>
      
      <div *ngFor="let transaction of transactions" class="transaction-item" [routerLink]="['/transaction', transaction.id]">
        <div class="transaction-info">
          <div class="transaction-title">{{transaction.desc || 'Транзакция'}}</div>
          <div class="transaction-date">{{transaction.date | date:'dd.MM.yyyy HH:mm'}}</div>
          <div class="transaction-status" [ngClass]="{'status-success': transaction.status === true, 'status-failed': transaction.status === false}">
            {{transaction.status === null ? 'Ожидание' : ''}}
            {{transaction.status === true ? 'Успешно' : ''}}
            {{transaction.status === false ? 'Отказ' : ''}}
          </div>
        </div>
        <div class="transaction-details">
          <div class="transaction-count" *ngIf="transaction.count">
            Количество: {{transaction.count}}
          </div>
          <div class="transaction-user">
            {{transaction.user.personal?.name}} {{transaction.user.personal?.surname}}
          </div>
          <div class="transaction-total">
            {{calculateTotalCost(transaction) | currency:'RUB':'symbol-narrow':'1.0-0'}}
          </div>
        </div>
      </div>
    </div>
  </main>
</ion-content>
