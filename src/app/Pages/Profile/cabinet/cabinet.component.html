<ion-content>
  <app-header [customContainer]="true" [hiddenBackButton]="true" (secondButtonClick)="redirectInEditPersonalInfo()">
    <div class="cabinet-header">
      <button (click)="back()" class="cabinet-header__back">
        <img src="/assets/icons/arrow.svg"  alt="Назад">
      </button>
      <span class="cabinet-header__title">Профиль</span>
      <button (click)="logoutInAccount()" class="cabinet-header__exite">
        <img src="/assets/icons/exite.svg"  alt="Выход из аккаунта">
      </button>
    </div>
  </app-header>
  <div class="main-container--with-litle-header">
    <div class="cabinet">
      <div class="cabinet__user-section">
        <div class="user-images">
          <img class="user-avatar" [src]="user?.avatar | checkImgUrl" alt="">
        </div>
      
        <div class="cabinet__user-section__info">
          <div *ngIf="user?.id" class="uid">UID {{user?.id}}</div>
          <div class="cabinet__user-section__info__name">
            <app-icon-button *ngIf="user?.personal?.start_number" font="font-bold" widht="w20" height="auto-height" clippy="clippy-right" buttonText="{{user?.personal?.start_number}}"></app-icon-button>
            <div class="info__name__item" *ngIf="user?.personal?.name && user?.personal?.surname" >{{user?.personal?.name}}</div>
            <div class="info__name__item" *ngIf="user?.personal?.name && user?.personal?.surname">{{user?.personal?.surname}}</div>
            <div class="info__name__item" *ngIf="user?.name && !user?.personal" >{{user?.name}}</div>
            <div class="info__name__item" *ngIf="user?.surname && !user?.personal" >{{user?.surname}}</div>
          </div>
          <div *ngIf="user?.email" class="email">{{user?.email}}</div>
          <div class="user-statuses-grid">
            <app-icon-button clippy="clippy-right" height="auto-height" theme="red" *ngFor="let status of userTranslitStatuses" [buttonText]="status"></app-icon-button>
          </div>
        </div>
        
        <img (click)="selectAccountValue.set(!selectAccountValue())" [class.active]="selectAccountValue()" src="/assets/icons/arrow.svg" alt="" class="open-select-account-menu">
      </div>
  
      <div [class.active]="selectAccountValue()" class="accounts-container">
        <app-icon-button (click)="navigateInLogin()" buttonIconColor="red-icon" sizeIcon="standart-size" widht="full" buttonBorderColor="red-border"  elementsPosition="row__reverse" icon="/assets/icons/plus.svg" fontColor="red-color" font="font" buttonBorderWidth="b1"  theme="white" buttonText="Добавить аккаунт"></app-icon-button>
        <app-icon-button buttonText="test" theme="dark"></app-icon-button>
        <ng-container *ngFor="let user of allUsers">
          <div  class="accounts-container__item">
            <app-user-section [showAddress]="false" [showRank]="false" [name]="true" [surname]="true" (click)="selectUserAndRefreshAllData(user)" [user]="user"></app-user-section>
            <div *ngIf="user.id == userService.user.value?.id" class="current-account">
                <img src="/assets/icons/red-select.svg" alt="">
            </div>
            <div *ngIf="user.id !== userService.user.value?.id" class="trash-button">
              <img (click)="deleteUserInLocalStorage(user)" src="/assets/icons/trash.svg" alt="">
            </div>
          </div>
        </ng-container>
        
      </div>
      <div class="menu-grid">
          <ng-container *ngIf="usersMenuItem[this.selectedStatusItem?.name]">
            <ng-container *ngFor="let menuItem of usersMenuItem[this.selectedStatusItem.name]">
              <app-profile-menu-item  [routing]="menuItem.routing" [iconColor]="menuItem.iconColor" [icon]="menuItem.icon" [name]="menuItem.name"></app-profile-menu-item>
            </ng-container>
        </ng-container>
      
        <app-profile-menu-item  [routing]="'settings'" [iconColor]="'#0000'" [icon]="'/assets/icons/settings.svg'" [name]="'Настройки'"></app-profile-menu-item> 
        <a  href="https://t.me/mototrackapp">
          <app-profile-menu-item  [routing]="'link'" [iconColor]="'#0000'" [icon]="'/assets/icons/support-icon.svg'" [name]="'Обратная связь'"></app-profile-menu-item>
        </a>
      </div>
    
      <div class="link-on-support">
        <span class="version">Текущая версия приложеия: {{version}}</span>
      </div>
    </div>
      
    
  </div>
 
</ion-content>

