<ion-content>

  <app-header (click)="openRegionModal()" [hiddenBackButton]="true" [headerTitle]="regionFilterName" ></app-header>

  <div class="tabs-container">
    <app-tabs>
      <app-tabs-item name="Текущие события">

      <div class="events-grid"> 
        @for (event of this.eventTapeService.events; track $index) {
          <app-event-card [event]="event">
            <div *ngIf="userService.userHaveRoot()" class="button-container">
              <app-standart-button style="width: 100%;" (click)="generateGoogleLink(event.id)" buttonText="Выгрузить список"></app-standart-button>
            </div>
          </app-event-card>}
      </div>

      </app-tabs-item>      
      
      <app-tabs-item name="Прошедшие">
        <div class="events-grid"> 
          @for (event of this.expiredEvents; track $index) {
            <app-event-card [event]="event">
              <div *ngIf="userService.userHaveRoot()" class="button-container">
                <app-standart-button style="width: 100%;" (click)="generateGoogleLink(event.id)" buttonText="Выгрузить список"></app-standart-button>
              </div>
            </app-event-card>}
        </div>
      </app-tabs-item>
    </app-tabs>
  </div>
    
 
  
  <main class="main-container">
    

  </main>
</ion-content>

<ion-modal [isOpen]="tableModalValue">
  <ng-template>
    <ion-content>
      <div class="google-tabs">
        <div class="google-tabs__modal-text">
            Список участников был отправлен на вашу почту {{userService.user.value?.email}}
            Сейчас можно открыть его по
          <a class="google-tabs__modal-text__link" target="_blank" [href]="googleTabsLink">этой ссылке</a>
        </div>
        <app-standart-button (click)="closetTableModal()" style="width: 100%;" buttonText="Закрыть" theme="light"></app-standart-button>
      </div>
    </ion-content>
  </ng-template>
  
</ion-modal>

<ion-modal class="region-modal" (didDismiss)="closeRegionModal()"  [isOpen]="regionModalState">
  <ng-template>
    <ion-content>
      <div class="region-modal-container">
        <app-standart-input-search label="Область/край*" [searchCurrentItems]="searchRegionItems" [searchItems]="searchRegionItems" (changeSearchValue)="filterEventsInLocation($event)"></app-standart-input-search>
      </div>
    </ion-content>
  </ng-template>  
</ion-modal>       