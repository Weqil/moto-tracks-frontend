import{a as R,b as H,c as Y,d as U}from"./chunk-HMOUTJUP.js";import{a as J,b as K,c as Q}from"./chunk-WSCMVZFT.js";import{a as G}from"./chunk-UB3WMOVF.js";import{a as j}from"./chunk-L3WJPVL4.js";import{a as A}from"./chunk-7KYDD3R6.js";import{a as z}from"./chunk-J3CYG6CI.js";import{a as q}from"./chunk-J42XBVPU.js";import{c as N,f as V}from"./chunk-LB5WRDFC.js";import{a as B}from"./chunk-E7XUYOOL.js";import"./chunk-BSFBEI64.js";import"./chunk-GF6VGRIS.js";import{A as M,B as F,C as a,D as O,L as I,M as D,ba as L,e as P,x as e,z as E}from"./chunk-FYK4VEB7.js";import{Cb as S,D as w,Ha as p,Qa as T,V as m,Wa as y,aa as _,ba as C,bb as o,h as k,ib as i,jb as s,kb as b,ob as v,rb as l,sb as g,y as x}from"./chunk-LFIOHD3L.js";import"./chunk-UKLEBRLV.js";import"./chunk-5E46SPE4.js";import"./chunk-ACGYCHS3.js";import"./chunk-ZXFZWMZA.js";import"./chunk-F7XBNY6P.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-XODSA4YU.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";function W(u,d){if(u&1){let c=v();i(0,"app-standart-button",16),l("click",function(){_(c);let n=g();return C(n.stepNext())}),s()}if(u&2){let c=g();o("disabled",c.stepInvalidate())}}function X(u,d){if(u&1){let c=v();i(0,"app-standart-button",17),l("click",function(){_(c);let n=g();return C(n.submitForm())}),s()}if(u&2){let c=g();o("disabled",c.stepInvalidate())}}var Te=(()=>{let d=class d{constructor(){this.navController=m(D),this.maxStepsCount=1,this.stepCurrency=1,this.trackService=m(A),this.loadingService=m(z),this.toastService=m(G),this.platform=m(I),this.newParams=[],this.createTrackForm=new M({name:new a("",[e.required,e.minLength(3)]),address:new a("",[e.required,e.minLength(3)]),latitude:new a("",[e.required,e.minLength(3)]),longitude:new a("",[e.required,e.minLength(3)]),free:new a("",[e.required,e.minLength(3)]),turns:new a("",[e.required,e.minLength(3)]),length:new a("",[e.required,e.minLength(3)]),desc:new a(`\u0414\u043B\u0438\u043D\u0430: - 
\u0428\u0438\u0440\u0438\u043D\u0430: -
\u041F\u043E\u043A\u0440\u044B\u0442\u0438\u0435: -
\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435: -
\u041B\u0435\u0432\u044B\u0445 \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u043E\u0432: -
\u041F\u0440\u0430\u0432\u044B\u0445 \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u043E\u0432: -

\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0438 \u0432\u0440\u0435\u043C\u044F \u0440\u0430\u0431\u043E\u0442\u044B:
\u041F\u041D:
\u0412\u0422:
\u0421\u0420:
\u0427\u0422:
\u041F\u0422:
\u0421\u0411:
\u0412\u0421:
                            `,[e.required,e.minLength(3)]),level:new a("",[e.required,e.minLength(3)]),images:new a("",[e.required,e.minLength(3)]),is_work:new a(1)})}addNewParameter(){this.newParams.push({temp_id:Date.now(),title:"",value:""})}deleteNewParameter(r){this.newParams=this.newParams.filter(n=>n.temp_id!==r)}stepInvalidate(){if(this.createTrackForm.value)switch(this.stepCurrency){case 1:return this.createTrackForm.value.name.length<=3||this.createTrackForm.value.desc.length<=3||!this.createTrackForm.value.images.length;case 2:return!this.createTrackForm.value.address.length||!this.createTrackForm.value.latitude||!this.createTrackForm.value.longitude;default:return!1}else return!0}getImages(r){console.log(r),this.createTrackForm.patchValue({images:r})}changeAddress(r){console.log(r),r.latitude&&r.longitude&&this.createTrackForm.patchValue({latitude:r.latitude,longitude:r.longitude,address:r.address})}stepPrevious(){this.stepCurrency>1?this.stepCurrency--:this.navController.back()}stepNext(){this.stepCurrency<=this.maxStepsCount&&!this.stepInvalidate()&&this.stepCurrency++}submitForm(){this.loadingService.showLoading();let r=new FormData;for(let t in this.createTrackForm.value)r.append(t,this.createTrackForm.value[t]);for(var n=0;n<this.createTrackForm.value.images.length;n++)r.append("images[]",this.createTrackForm.value.images[n]);this.trackService.createTrack(r).pipe(x(t=>(this.toastService.showToast("\u0412\u043E\u0437\u043D\u0438\u043A\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430","danger"),k)),w(()=>this.loadingService.hideLoading())).subscribe(t=>{console.log(t),this.toastService.showToast("\u0422\u0440\u0435\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D","success"),this.navController.back()})}cancelCreate(){this.navController.back()}ionViewDidLeave(){this.stepCurrency=1,this.createTrackForm.reset()}ngOnInit(){}};d.\u0275fac=function(n){return new(n||d)},d.\u0275cmp=T({type:d,selectors:[["app-create-track-page"]],decls:19,vars:9,consts:[["headerTitle","\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0442\u0440\u0435\u043A\u0430",3,"customBackClick","customBack"],[1,"main-container--with-header"],[3,"maxStepsCount","stepCurrency"],["stepNum","1",3,"maxStepsCount","stepCurrency"],["action",""],["label","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0432\u0430\u0448\u0435\u0433\u043E \u0442\u0440\u0435\u043A\u0430",3,"control"],[1,"decription"],["label","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0430\u0448\u0435\u0433\u043E \u0442\u0440\u0435\u043A\u0430",3,"control"],[1,"select-level__label"],[3,"addressEditEmit"],[1,"photo-slider"],["type","create",3,"filesEmit"],[1,"navigate-buttons-container"],["buttonText","\u0414\u0430\u043B\u0435\u0435","theme","standart",3,"disabled","click",4,"ngIf"],["buttonText","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u044C","theme","standart",3,"disabled","click",4,"ngIf"],["buttonText","\u041E\u0442\u043C\u0435\u043D\u0430","theme","light",3,"click"],["buttonText","\u0414\u0430\u043B\u0435\u0435","theme","standart",3,"click","disabled"],["buttonText","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u044C","theme","standart",3,"click","disabled"]],template:function(n,t){n&1&&(i(0,"ion-content")(1,"app-header",0),l("customBackClick",function(){return t.stepPrevious()}),s(),i(2,"main",1)(3,"app-step-container",2)(4,"app-step-container-item",3)(5,"form",4),b(6,"app-standart-input",5),i(7,"div",6),b(8,"app-standart-rich-input",7),s(),i(9,"div",8),S(10,"\u0410\u0434\u0440\u0435\u0441 \u0442\u0440\u0435\u043A\u0430"),s(),i(11,"app-address-input",9),l("addressEditEmit",function(h){return t.changeAddress(h)}),s(),i(12,"div",10)(13,"app-edit-slider",11),l("filesEmit",function(h){return t.getImages(h)}),s()()()()(),i(14,"div",12),y(15,W,1,1,"app-standart-button",13)(16,X,1,1,"app-standart-button",14),i(17,"div")(18,"app-standart-button",15),l("click",function(){return t.cancelCreate()}),s()()()()()),n&2&&(p(),o("customBack",!0),p(2),o("maxStepsCount",t.maxStepsCount)("stepCurrency",t.stepCurrency),p(),o("maxStepsCount",t.maxStepsCount)("stepCurrency",t.stepCurrency),p(2),o("control",t.createTrackForm.get("name")),p(2),o("control",t.createTrackForm.get("desc")),p(7),o("ngIf",t.stepCurrency!==t.maxStepsCount),p(),o("ngIf",t.stepCurrency===t.maxStepsCount))},dependencies:[B,L,P,O,E,F,q,V,N,Y,H,R,Q,j,J,U,K],styles:[".navigate-buttons-container[_ngcontent-%COMP%]{padding-top:var(--standart-padding);display:flex;flex-direction:column;gap:var(--little-padding)}.step-description[_ngcontent-%COMP%]{text-align:center;color:#4c5861;font-size:.75rem;font-family:var(--font-regular)}.step-description[_ngcontent-%COMP%]{padding-bottom:var(--standart-padding)}.photo-slider[_ngcontent-%COMP%], .decription[_ngcontent-%COMP%]{padding-top:var(--standart-padding)}.specifications[_ngcontent-%COMP%]{padding-top:var(--standart-padding);display:flex;flex-direction:column;gap:var(--standart-padding)}ion-radio[_ngcontent-%COMP%]{--border-radius: 4px;--inner-border-radius: 4px;width:8rem;--color: #ddd;--color-checked: var(--blue-primary-color)}ion-radio.ios[_ngcontent-%COMP%]::part(container){width:20px;height:20px;border:2px solid #ddd;border-radius:4px}.radio-checked.ios[_ngcontent-%COMP%]::part(container){border-color:var(--blue-primary-color)}.custom-checked__item[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;gap:1rem;color:#4c5861;font-size:12px;padding-bottom:1px;font-family:var(--font-regular)}ion-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.select-level__label[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between;gap:1rem;color:var(--font-);font-size:12px;padding-bottom:1px;font-family:var(--font-regular);padding-bottom:var(--little-padding)}.new-param-input__title[_ngcontent-%COMP%]{border:1px solid rgba(76,88,97,.2549019608);padding:.2rem;font-family:var(--font-regular);border-radius:5px}.new-param-input__title[_ngcontent-%COMP%]:focus{outline:1px solid rgba(82,177,250,.6901960784);border:1px solid rgba(76,88,97,.2549019608);padding:.2rem;font-family:var(--font-regular);border-radius:5px}.new-param-input__text[_ngcontent-%COMP%]{border:1px solid rgba(76,88,97,.2549019608);border-radius:5px;width:100%;min-height:2.25rem;font-size:12px;padding-left:.8rem;transition:.1s;margin-top:3px;color:#363d42;font-family:var(--font-regular);background:none}.new-param-input__text[_ngcontent-%COMP%]:focus{transition:.2s;outline:1px solid rgba(82,177,250,.6901960784);margin-top:3px;border-radius:5px;width:100%;background:none;min-height:2.25rem;font-size:12px;padding-left:.8rem;color:#363d42}.new-param-input[_ngcontent-%COMP%]{font-size:12px;padding:1rem;display:flex;flex-direction:column;gap:.5rem;border-radius:5px;border:1px solid rgba(76,88,97,.2549019608)}form[_ngcontent-%COMP%]{padding-top:var(--standart-padding)}.delete-button[_ngcontent-%COMP%]{margin-top:.19rem;width:2rem;border-radius:2px;transition:.2s;background:#dce9ff;right:2.3rem;z-index:2;height:1.8rem}.delete-button[_ngcontent-%COMP%]   .delete-img[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(39%) sepia(25%) saturate(2348%) hue-rotate(190deg) brightness(112%) contrast(105%)}.select-level__label[_ngcontent-%COMP%]{padding-top:var(--standart-padding)}"]});let u=d;return u})();export{Te as CreateTrackPageComponent};
