import{c as R}from"./chunk-WSCMVZFT.js";import{a as N}from"./chunk-L3WJPVL4.js";import{a as B}from"./chunk-J3CYG6CI.js";import{a as q}from"./chunk-EE2EJ3U4.js";import{a as j}from"./chunk-J42XBVPU.js";import{c as A,f as T}from"./chunk-LB5WRDFC.js";import{a as D}from"./chunk-E7XUYOOL.js";import{a as z}from"./chunk-KY3FK4A4.js";import"./chunk-BSFBEI64.js";import{a as x}from"./chunk-QFO5OYTV.js";import{a as v}from"./chunk-GF6VGRIS.js";import{A as M,B as P,C as g,D as k,M as L,ba as O,j as b,r as E,x as o,z as S}from"./chunk-FYK4VEB7.js";import{Cb as h,D as C,Ha as u,P as y,Qa as I,V as n,bb as m,h as w,ib as l,jb as p,kb as c,rb as f,y as F}from"./chunk-LFIOHD3L.js";import"./chunk-UKLEBRLV.js";import"./chunk-5E46SPE4.js";import"./chunk-ACGYCHS3.js";import"./chunk-ZXFZWMZA.js";import"./chunk-F7XBNY6P.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-XODSA4YU.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";var U=(()=>{let r=class r{constructor(){this.http=n(b)}registerUser(t){return this.http.post(`${v.BACKEND_URL}:${v.BACKEND_PORT}/api/register`,t)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();var ce=(()=>{let r=class r{constructor(){this.navController=n(L),this.loading=n(B),this.registerService=n(U),this.userService=n(x),this.authService=n(z),this.router=n(E),this.registerForm=new M({name:new g("",[o.required,o.minLength(3),o.maxLength(50)]),email:new g("",[o.required,o.email]),password:new g("",[o.required,o.minLength(3)]),password_confirmation:new g("",[o.required,o.minLength(3)])}),this.registerInvalid={localError:!1,serverError:!1,name:{status:!1,message:""},email:{status:!1,message:""},password:{status:!1,message:""},password_confirmation:{status:!1,message:""}}}validateForm(){var t,e,i,s,d,_;this.registerInvalid.localError=!1,(t=this.registerForm.get("name"))!=null&&t.errors?(this.registerInvalid.localError=!0,this.registerInvalid.name.status=!0,this.registerInvalid.name.message=(e=this.registerForm.get("name"))!=null&&e.hasError("required")?"\u041F\u043E\u043B\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C":"\u0418\u043C\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"):(this.registerInvalid.name.status=!1,this.registerInvalid.name.message=""),(i=this.registerForm.get("password"))!=null&&i.errors?(this.registerInvalid.localError=!0,this.registerInvalid.password.status=!0,this.registerInvalid.password.message=(s=this.registerForm.get("password"))!=null&&s.hasError("required")?"\u041F\u043E\u043B\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C":"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"):(this.registerInvalid.password.status=!1,this.registerInvalid.password.message=""),(d=this.registerForm.get("password"))!=null&&d.errors?(this.registerInvalid.localError=!0,this.registerInvalid.password.status=!0,this.registerInvalid.password.message=(_=this.registerForm.get("password"))!=null&&_.hasError("required")?"\u041F\u043E\u043B\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C":"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"):(this.registerInvalid.password.status=!1,this.registerInvalid.password.message="")}createFormData(){var e,i,s,d;let t=new FormData;return t.append("name",(e=this.registerForm.get("name"))==null?void 0:e.value),t.append("email",(i=this.registerForm.get("email"))==null?void 0:i.value),t.append("password",(s=this.registerForm.get("password"))==null?void 0:s.value),t.append("password_confirmation",(d=this.registerForm.get("password_confirmation"))==null?void 0:d.value),t}register(t){this.registerService.registerUser(t).pipe(F(e=>(console.log(e),this.loading.hideLoading(),w)),C(()=>{this.loading.hideLoading()})).subscribe(e=>{this.userService.setUserInLocalStorage(e.user),this.authService.setAuthToken(String(e.access_token)),console.log(e.access_token),this.router.navigate(["/cabinet"])})}submitLoginForm(){this.validateForm(),this.loading.showLoading();let t=this.createFormData();this.register(t),console.log(this.registerForm)}redirectInLogin(){this.navController.navigateForward("/login",{animationDirection:"forward"})}ngOnInit(){}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=I({type:r,selectors:[["app-registration-page"]],decls:19,vars:11,consts:[["headerTitle","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F","secondButtonIcon","/assets/icons/menu-pen.svg"],[1,"main-container--with-header"],[1,"login"],[1,"login__logo"],["src","/assets/icons/favicon.png","alt","",1,"login__logo__img"],["action","",1,"login__form"],["name","name",3,"label","control"],["name","email",3,"label","control"],["type","password","password","password",3,"openPassword","label","control"],[1,"recovery-password-wrapper"],[1,"submit-button"],["buttonText","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F","type","submit",3,"onClick","disabled"],[1,"dont-have-account"],[1,"dont-have-account__registration-link",3,"click"],[1,"dont-have-account__registration-link__route"]],template:function(e,i){e&1&&(l(0,"ion-content"),c(1,"app-header",0),l(2,"div",1)(3,"div",2)(4,"div",3),c(5,"img",4),p(),l(6,"form",5),c(7,"app-standart-input",6)(8,"app-standart-input",7)(9,"app-standart-input",8)(10,"app-standart-input",8)(11,"div",9),p()(),l(12,"div",10)(13,"app-standart-button",11),f("onClick",function(){return i.submitLoginForm()}),p()(),l(14,"div",12)(15,"span",13),f("click",function(){return i.redirectInLogin()}),h(16,"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430? "),l(17,"span",14),h(18,"\u0412\u043E\u0439\u0442\u0438 \u0432 \u0430\u043A\u043A\u0430\u0443\u043D\u0442"),p()()()()()),e&2&&(u(7),m("label","\u0418\u043C\u044F")("control",i.registerForm.get("name")),u(),m("label","E-mail")("control",i.registerForm.get("email")),u(),m("openPassword",!0)("label","\u041F\u0430\u0440\u043E\u043B\u044C")("control",i.registerForm.get("password")),u(),m("openPassword",!0)("label","\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C")("control",i.registerForm.get("password_confirmation")),u(3),m("disabled",i.registerForm.invalid))},dependencies:[D,O,k,S,P,q,j,R,N,T,A],styles:[".login__logo[_ngcontent-%COMP%]{display:flex;justify-content:center}.login__logo[_ngcontent-%COMP%]   .login__logo__img[_ngcontent-%COMP%]{width:7rem}.login__form[_ngcontent-%COMP%]{display:flex;padding:0 1rem;flex-direction:column;gap:var(--standart-padding)}.recovery-password-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.recovery-password[_ngcontent-%COMP%]{font-family:var(--font-regular);font-size:var(--font-little-size);color:var(--grey-color);opacity:55%}.submit-button[_ngcontent-%COMP%]{padding-top:var(--standart-padding)}.dont-have-account[_ngcontent-%COMP%]{padding-top:2rem;display:flex;align-items:center;justify-content:center}.dont-have-account[_ngcontent-%COMP%]   .dont-have-account__registration-link[_ngcontent-%COMP%]{font-size:.75rem;font-family:var(--font-regular);color:var(--gray-color);cursor:pointer}.dont-have-account[_ngcontent-%COMP%]   .dont-have-account__registration-link__route[_ngcontent-%COMP%]{font-size:.75rem;font-family:var(--font-regular);color:var(--blue-primary-color);cursor:pointer}"]});let a=r;return a})();export{ce as RegistrationPageComponent};
