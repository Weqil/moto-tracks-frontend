import{c as N}from"./chunk-WSCMVZFT.js";import{a as q}from"./chunk-UB3WMOVF.js";import{a as A}from"./chunk-L3WJPVL4.js";import{a as U}from"./chunk-J3CYG6CI.js";import{a as B}from"./chunk-JRTDRGUG.js";import{a as P}from"./chunk-ANI5XEPI.js";import{c as T,f as k}from"./chunk-LB5WRDFC.js";import{a as y}from"./chunk-E7XUYOOL.js";import"./chunk-BSFBEI64.js";import{a as M}from"./chunk-QFO5OYTV.js";import"./chunk-GF6VGRIS.js";import{A as x,C as m,ba as E,j as V,x as o}from"./chunk-FYK4VEB7.js";import{Cb as w,D as h,Ha as p,Qa as L,V as g,Wa as D,aa as _,ba as v,bb as r,eb as F,ib as s,jb as a,kb as S,ob as C,rb as b,sb as l}from"./chunk-LFIOHD3L.js";import"./chunk-UKLEBRLV.js";import"./chunk-5E46SPE4.js";import"./chunk-ACGYCHS3.js";import"./chunk-ZXFZWMZA.js";import"./chunk-F7XBNY6P.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-XODSA4YU.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";function I(u,c){if(u&1){let i=C();s(0,"app-standart-button",15),b("click",function(){_(i);let t=l();return v(t.createLicenses())}),a()}if(u&2){let i=l();r("disabled",!i.validateLicenses())}}function W(u,c){if(u&1){let i=C();s(0,"app-standart-button",16),b("click",function(){_(i);let t=l();return v(t.updateLicenses())}),a()}if(u&2){let i=l();r("disabled",!i.validateLicenses())}}function O(u,c){if(u&1){let i=C();s(0,"app-standart-button",15),b("click",function(){_(i);let t=l();return v(t.createPolis())}),a()}if(u&2){let i=l();r("disabled",!i.validatePolis())}}function z(u,c){if(u&1){let i=C();s(0,"app-standart-button",16),b("click",function(){_(i);let t=l();return v(t.updatePolis())}),a()}if(u&2){let i=l();r("disabled",!i.validatePolis())}}function H(u,c){if(u&1){let i=C();s(0,"app-standart-button",15),b("click",function(){_(i);let t=l();return v(t.createPasport())}),a()}if(u&2){let i=l();r("disabled",!i.validatePasport())}}function j(u,c){if(u&1){let i=C();s(0,"app-standart-button",16),b("click",function(){_(i);let t=l();return v(t.updatePasport())}),a()}if(u&2){let i=l();r("disabled",!i.validatePasport())}}var ae=(()=>{let c=class c{constructor(){this.loaderService=g(U),this.httpClient=g(V),this.userService=g(M),this.toastService=g(q),this.licensesForm=new x({licensesNumber:new m("",[o.required,o.minLength(3)]),licensesFileLink:new m("",[o.required,o.minLength(3)])}),this.polisForm=new x({polisNumber:new m("",[o.required,o.minLength(3)]),issuedWhom:new m("",[o.required,o.minLength(3)]),itWorksDate:new m("",[o.required,o.minLength(3)]),polisFileLink:new m("",[o.required,o.minLength(3)])}),this.pasportForm=new x({numberAndSeria:new m("",[o.required,o.minLength(3)]),pasportFileLink:new m("")})}checkFormInDublicatsOldValue(e,t){let n=!1;for(let f in e.value)if(e.value[f]===t[f]){n=!0;break}return n}validateLicenses(){return!!this.licensesForm.valid}validatePolis(){return!!this.polisForm.valid}validatePasport(){return!!this.pasportForm.valid}createLicenses(){this.loaderService.showLoading(),this.userService.createUserDocument({type:"licenses",data:this.licensesForm.value}).pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(e=>{this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u043B\u0438\u0446\u0435\u043D\u0437\u0438\u0438 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B","success")})}createPasport(){this.loaderService.showLoading(),this.userService.createUserDocument({type:"pasport",data:this.pasportForm.value}).pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(e=>{console.log(e),this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B","success")})}createPolis(){this.loaderService.showLoading(),this.userService.createUserDocument({type:"polis",data:this.polisForm.value}).pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(e=>{console.log(e),this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u0438\u0441\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B","success")})}updateLicenses(){var e;this.loaderService.showLoading(),this.userService.updateDocument(Number((e=this.oldLicensesValue)==null?void 0:e.id),this.licensesForm.value).pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(t=>{this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u043B\u0438\u0446\u0435\u043D\u0437\u0438\u0438 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B","success")})}updatePasport(){var e;this.loaderService.showLoading(),this.userService.updateDocument(Number((e=this.oldPasportValue)==null?void 0:e.id),this.pasportForm.value).pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(t=>{this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u0430\u0441\u043F\u043E\u0440\u0442\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B","success")})}updatePolis(){var e;this.loaderService.showLoading(),this.userService.updateDocument(Number((e=this.oldPolisValue)==null?void 0:e.id),this.polisForm.value).pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(t=>{this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u0438\u0441\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B","success")})}setFormValue(){this.loaderService.showLoading(),this.userService.getUserDocuments().pipe(h(()=>{this.loaderService.hideLoading()})).subscribe(e=>{var t,n,f;e.documents&&(this.licensesForm.patchValue((t=e.documents.find(d=>d.type==="licenses"))==null?void 0:t.data),this.polisForm.patchValue((n=e.documents.find(d=>d.type==="polis"))==null?void 0:n.data),this.pasportForm.patchValue((f=e.documents.find(d=>d.type==="pasport"))==null?void 0:f.data),this.oldLicensesValue=e.documents.find(d=>d.type==="licenses"),console.log(this.oldLicensesValue),this.oldPolisValue=e.documents.find(d=>d.type==="polis"),this.oldPasportValue=e.documents.find(d=>d.type==="pasport"))})}ionViewWillEnter(){this.setFormValue()}ngOnInit(){}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=L({type:c,selectors:[["app-user-documents"]],decls:25,vars:10,consts:[["headerTitle","\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430"],[1,"main-container--with-header"],[1,"document-header"],[1,"licenses","document-container"],["placeholder","\u041B\u0438\u0446\u0435\u043D\u0437\u0438\u044F \u041C\u0424\u0420","label","\u041B\u0438\u0446\u0435\u043D\u0437\u0438\u044F \u041C\u0424\u0420 (\u0442\u0438\u043F, \u2116):",3,"control"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0444\u0430\u0439\u043B \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430","label","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0444\u0430\u0439\u043B",3,"control"],["buttonText","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",3,"disabled"],["buttonText","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",3,"disabled"],[1,"polis","document-container"],["placeholder","\u0421\u0435\u0440\u0438\u044F, \u043D\u043E\u043C\u0435\u0440","label","\u0421\u0435\u0440\u0438\u044F \u0438 \u043D\u043E\u043C\u0435\u0440",3,"control"],["placeholder","\u041A\u0435\u043C \u0432\u044B\u0434\u0430\u043D","label","\u041A\u0435\u043C \u0432\u044B\u0434\u0430\u043D",3,"control"],["placeholder","\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F","type","date","label","\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F",3,"control"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0441\u043A\u0430\u043D \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430","label","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0444\u0430\u0439\u043B \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430",3,"control"],[1,"pasportForm","document-container"],["placeholder","\u0421\u0435\u0440\u0438\u044F, \u043D\u043E\u043C\u0435\u0440","label","\u0421\u0435\u0440\u0438\u044F, \u043D\u043E\u043C\u0435\u0440",3,"control"],["buttonText","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",3,"click","disabled"],["buttonText","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",3,"click","disabled"]],template:function(t,n){t&1&&(s(0,"ion-content"),S(1,"app-header",0),s(2,"main",1)(3,"div",2),w(4,"\u041B\u0438\u0446\u0435\u043D\u0437\u0438\u0438"),a(),s(5,"div",3),S(6,"app-standart-input",4)(7,"app-standart-input",5),a(),D(8,I,1,1,"app-standart-button",6)(9,W,1,1,"app-standart-button",7),s(10,"div",2),w(11,"\u0421\u0442\u0440\u0430\u0445\u043E\u0432\u043E\u0439 \u043F\u043E\u043B\u0438\u0441"),a(),s(12,"div",8),S(13,"app-standart-input",9)(14,"app-standart-input",10)(15,"app-standart-input",11)(16,"app-standart-input",12),a(),D(17,O,1,1,"app-standart-button",6)(18,z,1,1,"app-standart-button",7),s(19,"div",2),w(20,"\u041F\u0430\u0441\u043F\u043E\u0440\u0442 / \u0421\u0432\u0438\u0434\u0435\u0442\u0435\u043B\u044C\u0441\u0442\u0432\u043E \u043E \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u0438"),a(),s(21,"div",13),S(22,"app-standart-input",14),a(),D(23,H,1,1,"app-standart-button",6)(24,j,1,1,"app-standart-button",7),a()()),t&2&&(p(6),r("control",n.licensesForm.get("licensesNumber")),p(),r("control",n.licensesForm.get("licensesFileLink")),p(),F(n.oldLicensesValue?9:8),p(5),r("control",n.polisForm.get("polisNumber")),p(),r("control",n.polisForm.get("issuedWhom")),p(),r("control",n.polisForm.get("itWorksDate")),p(),r("control",n.polisForm.get("polisFileLink")),p(),F(n.oldPolisValue?18:17),p(5),r("control",n.pasportForm.get("numberAndSeria")),p(),F(n.oldPasportValue?24:23))},dependencies:[y,E,B,P,N,A,k,T],styles:[".document-container[_ngcontent-%COMP%]{border:1px solid rgba(76,88,97,.2549019608);padding:var(--little-padding);margin-bottom:var(--little-padding);display:flex;border-radius:5px;gap:var(--little-padding);flex-direction:column}.document-header[_ngcontent-%COMP%]{padding-top:1rem;font-family:var(--font-bold);font-size:var(--font-regular-size);padding-bottom:var(--little-padding)}"]});let u=c;return u})();export{ae as UserDocumentsComponent};
