import{a as I}from"./chunk-QFO5OYTV.js";import{a as g,i as x}from"./chunk-FYK4VEB7.js";import{P as h,U as l,V as d,g as p,oa as k}from"./chunk-LFIOHD3L.js";var S=(()=>{let o=class o{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=x(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),o.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);let s=o.getCookieRegExp(e).exec(this.document.cookie);return s[1]?o.safeDecodeURIComponent(s[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(s=>{let[n,c]=s.split("=");e[o.safeDecodeURIComponent(n.replace(/^ /,""))]=o.safeDecodeURIComponent(c)}),e}set(e,t,s,n,c,u,f,v){if(!this.documentIsAccessible)return;if(typeof s=="number"||s instanceof Date||n||c||u||f){let m={expires:s,path:n,domain:c,secure:u,sameSite:f||"Lax",partitioned:v};this.set(e,t,m);return}let r=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",i=s||{};if(i.expires)if(typeof i.expires=="number"){let m=new Date(new Date().getTime()+i.expires*1e3*60*60*24);r+="expires="+m.toUTCString()+";"}else r+="expires="+i.expires.toUTCString()+";";i.path&&(r+="path="+i.path+";"),i.domain&&(r+="domain="+i.domain+";"),i.secure===!1&&i.sameSite==="None"&&(i.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),i.secure&&(r+="secure;"),i.sameSite||(i.sameSite="Lax"),r+="sameSite="+i.sameSite+";",i.partitioned&&(r+="Partitioned;"),this.document.cookie=r}delete(e,t,s,n,c="Lax"){if(!this.documentIsAccessible)return;let u=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:u,path:t,domain:s,secure:n,sameSite:c})}deleteAll(e,t,s,n="Lax"){if(!this.documentIsAccessible)return;let c=this.getAll();for(let u in c)c.hasOwnProperty(u)&&this.delete(u,e,t,s,n)}};o.\u0275fac=function(t){return new(t||o)(l(g),l(k))},o.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var M=(()=>{let o=class o{constructor(){this.userService=d(I),this.cookieService=d(S),this.token=new p(this.getAuthToken()),this.authenticationState=new p(!1)}isAuthenticated(){return this.token.value||this.token.next(this.getAuthToken()),!!this.token.value}setAuthToken(e){this.cookieService.set("authToken",e,{secure:!0,sameSite:"Strict",expires:365})}logout(){this.cookieService.delete("authToken"),this.token.next(null),this.authenticationState.next(!1),this.userService.clearUser()}getAuthToken(){return this.cookieService.get("authToken")}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();export{M as a};
