import{a as st}from"./chunk-E7XUYOOL.js";import{E as it,c as tt,e as et,v as O,y as nt}from"./chunk-FYK4VEB7.js";import{$ as P,Ab as U,Cb as x,Db as F,Ha as h,Ib as j,Qa as J,Sa as Q,V as L,Wa as b,aa as C,ba as S,bb as m,ga as q,ha as Y,ib as v,jb as _,ka as X,kb as A,lb as N,mb as B,ob as w,rb as I,sb as f,vb as y}from"./chunk-LFIOHD3L.js";import{h as $}from"./chunk-LNJ3S2LQ.js";function ot(i){let{anchorOffset:t=0,focusOffset:n=0}=i.ownerDocument.getSelection()||{},e=Math.min(t,n),s=Math.max(t,n);return[e,s]}function ht(i,[t,n]){var e,s,o,r;let a=i.ownerDocument,l=a.createRange();l.setStart(i.firstChild||i,Math.min(t,(s=(e=i.textContent)===null||e===void 0?void 0:e.length)!==null&&s!==void 0?s:0)),l.setEnd(i.lastChild||i,Math.min(n,(r=(o=i.textContent)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0));let c=a.getSelection();c&&(c.removeAllRanges(),c.addRange(l))}var z=class{constructor(t){this.element=t,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(t){this.element.innerHTML=t.replace(/\n$/,`

`)}get selectionStart(){return ot(this.element)[0]}get selectionEnd(){return ot(this.element)[1]}setSelectionRange(t,n){ht(this.element,[t!=null?t:0,n!=null?n:0])}select(){this.setSelectionRange(0,this.value.length)}};function mt(i){let t=new z(i);return new Proxy(i,{get(n,e){if(e in t)return t[e];let s=n[e];return typeof s=="function"?s.bind(n):s},set(n,e,s,o){return Reflect.set(e in t?t:n,e,s,o)}})}var ct=i=>i.isContentEditable?mt(i):i.querySelector("input,textarea")||i,G={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},K=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){let t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}let n=this.now.value!==t.value,e=this.now.selection.some((s,o)=>s!==t.selection[o]);!n&&!e||(n&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,n){this.now=t,this.updateElementState(t,{inputType:n,data:null})}};function ft(i,...t){return t.every(({value:n})=>n===i.value)}function gt(i,...t){return t.every(({value:n,selection:e})=>n===i.value&&e[0]===i.selection[0]&&e[1]===i.selection[1])}function vt({value:i,selection:t},n,e){let[s,o]=t,r=typeof e=="function"?e({value:i,selection:t}):e;return{value:i,selection:r==="replace"?[s,Math.max(s+n.length,o)]:[s,o]}}function H(i){return typeof i=="string"}function rt(i,t,n,e){let s="";for(let o=t.length;o<i.length;o++){let r=i[o]||"",a=(e==null?void 0:e.value[o])===r;if(!H(r)||r===n&&!a)return s;s+=r}return s}function ut(i,t){return Array.isArray(t)?i.length===t.length&&Array.from(i).every((n,e)=>{let s=t[e]||"";return H(s)?n===s:n.match(s)}):t.test(i)}function _t(i,t,n){let e=null,s=null,o=Array.from(i.value).reduce((a,l,c)=>{let p=rt(t,a,l,n),u=a+p,d=t[u.length]||"";return e===null&&c>=i.selection[0]&&(e=u.length),s===null&&c>=i.selection[1]&&(s=u.length),H(d)?u+d:l.match(d)?u+l:u},""),r=rt(t,o,"",n);return{value:ut(o+r,t)?o+r:o,selection:[e!=null?e:o.length,s!=null?s:o.length]}}function yt({value:i,selection:t},n){let[e,s]=t,o=e,r=s,a=Array.from(i).reduce((l,c,p)=>{let u=l+c;return e===p&&(o=l.length),s===p&&(r=l.length),u.match(n)?u:l},"");return{value:a,selection:[Math.min(o,a.length),Math.min(r,a.length)]}}function D(i,t,n=null){if(ut(i.value,t))return i;let{value:e,selection:s}=Array.isArray(t)?_t(i,t,n):yt(i,t);return{selection:s,value:Array.isArray(t)?e.slice(0,t.length):e}}function at(i,t){if(!Array.isArray(t))return i;let[n,e]=i.selection,s=[],o=Array.from(i.value).reduce((r,a,l)=>{let c=t[l]||"";return l===n&&s.push(r.length),l===e&&s.push(r.length),H(c)&&c===a?r:r+a},"");return s.length<2&&s.push(...new Array(2-s.length).fill(o.length)),{value:o,selection:[s[0],s[1]]}}var M=class{constructor(t,n){this.initialElementState=t,this.maskOptions=n,this.value="",this.selection=[0,0];let{value:e,selection:s}=D(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=e,this.selection=s}addCharacters([t,n],e){let{value:s,maskOptions:o}=this,r=this.getMaskExpression({value:s.slice(0,t)+e+s.slice(n),selection:[t+e.length,t+e.length]}),a={value:s,selection:[t,n]},l=at(a,r),[c,p]=vt(l,e,o.overwriteMode).selection,u=l.value.slice(0,c)+e,d=u.length,E=D({value:u+l.value.slice(p),selection:[d,d]},r,a);if(s.slice(0,t)===D({value:u,selection:[d,d]},r,a).value||gt(this,E))throw new Error("Invalid mask value");this.value=E.value,this.selection=E.selection}deleteCharacters([t,n]){if(t===n||!n)return;let{value:e}=this,s=this.getMaskExpression({value:e.slice(0,t)+e.slice(n),selection:[t,t]}),o={value:e,selection:[t,n]},r=at(o,s),[a,l]=r.selection,c=r.value.slice(0,a)+r.value.slice(l),p=D({value:c,selection:[a,a]},s,o);this.value=p.value,this.selection=p.selection}getMaskExpression(t){let{mask:n}=this.maskOptions;return typeof n=="function"?n(t):n}},Z=class{constructor(t){this.element=t,this.listeners=[]}listen(t,n,e){let s=n;this.element.addEventListener(t,s,e),this.listeners.push(()=>this.element.removeEventListener(t,s,e))}destroy(){this.listeners.forEach(t=>t())}},g={CTRL:1,ALT:2,SHIFT:4,META:8},T={Y:89,Z:90};function k(i,t,n){return i.ctrlKey===!!(t&g.CTRL)&&i.altKey===!!(t&g.ALT)&&i.shiftKey===!!(t&g.SHIFT)&&i.metaKey===!!(t&g.META)&&i.keyCode===n}function Et(i){return k(i,g.CTRL,T.Y)||k(i,g.CTRL|g.SHIFT,T.Z)||k(i,g.META|g.SHIFT,T.Z)}function xt(i){return k(i,g.CTRL,T.Z)||k(i,g.META,T.Z)}function Ct({value:i,selection:t},n){let[e,s]=t;if(e!==s)return[e,s];let o=n?i.slice(e).indexOf(`
`)+1||i.length:i.slice(0,s).lastIndexOf(`
`)+1;return[n?e:o,n?o:s]}function St({value:i,selection:t},n){let[e,s]=t;return e!==s?[e,s]:(n?[e,s+1]:[e-1,s]).map(r=>Math.min(Math.max(r,0),i.length))}var bt=/\s+$/g,wt=/^\s+/g,lt=/\s/;function It({value:i,selection:t},n){let[e,s]=t;if(e!==s)return[e,s];if(n){let l=i.slice(e),[c]=l.match(wt)||[""],p=l.trimStart().search(lt);return[e,p!==-1?e+c.length+p:i.length]}let o=i.slice(0,s),[r]=o.match(bt)||[""],a=o.trimEnd().split("").reverse().findIndex(l=>lt.exec(l));return[a!==-1?s-r.length-a:0,s]}function V(i=[]){return(t,...n)=>i.reduce((e,s)=>Object.assign(Object.assign({},e),s(e,...n)),t)}function W(i,t){let n=Object.assign(Object.assign({},G),t),e=V(n.preprocessors),s=V(n.postprocessors),o=typeof i=="string"?{value:i,selection:[0,0]}:i,{elementState:r}=e({elementState:o,data:""},"validation"),a=new M(r,n),{value:l,selection:c}=s(a,o);return typeof i=="string"?l:{value:l,selection:c}}var R=class extends K{constructor(t,n){super(),this.element=t,this.maskitoOptions=n,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new Z(this.element),this.options=Object.assign(Object.assign({},G),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=V(this.options.preprocessors),this.postprocessor=V(this.options.postprocessors),this.teardowns=this.options.plugins.map(e=>e(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",e=>{if(Et(e))return e.preventDefault(),this.redo();if(xt(e))return e.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",e=>{var s,o,r;let a=e.inputType.includes("Forward");switch(this.updateHistory(this.elementState),e.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:e,isForward:a,selection:St(this.elementState,a)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:e,isForward:a,selection:Ct(this.elementState,a),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:e,isForward:a,selection:It(this.elementState,a),force:!0});case"historyRedo":return e.preventDefault(),this.redo();case"historyUndo":return e.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(e);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(e,(r=(s=e.data)!==null&&s!==void 0?s:(o=e.dataTransfer)===null||o===void 0?void 0:o.getData("text/plain"))!==null&&r!==void 0?r:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&(this.updateElementState(this.upcomingElementState),this.upcomingElementState=null)},{capture:!0}),this.eventListener.listen("input",({inputType:e})=>{e!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t==null?void 0:t())}updateElementState({value:t,selection:n},e){let s=this.elementState.value;this.updateValue(t),this.updateSelectionRange(n),e&&s!==t&&this.dispatchInputEvent(e)}get elementState(){let{value:t,selectionStart:n,selectionEnd:e}=this.element;return{value:t,selection:[n!=null?n:0,e!=null?e:0]}}get maxLength(){let{maxLength:t}=this.element;return t===-1?1/0:t}updateSelectionRange([t,n]){var e;let{element:s}=this;s.matches(":focus")&&(s.selectionStart!==t||s.selectionEnd!==n)&&((e=s.setSelectionRange)===null||e===void 0||e.call(s,t,n))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(W(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:n,isForward:e,force:s=!1}){let o={value:this.elementState.value,selection:n},[r,a]=o.selection,{elementState:l}=this.preprocessor({elementState:o,data:""},e?"deleteForward":"deleteBackward"),c=new M(l,this.options),[p,u]=l.selection;c.deleteCharacters([p,u]);let d=this.postprocessor(c,o);if(!(o.value.slice(0,r)+o.value.slice(a)===d.value&&!s&&!this.element.isContentEditable)){if(ft(o,l,c,d))return t.preventDefault(),this.updateSelectionRange(e?[u,u]:[p,p]);this.upcomingElementState=d}}handleInsert(t,n){let{options:e,maxLength:s,element:o,elementState:r}=this,{elementState:a,data:l=n}=this.preprocessor({data:n,elementState:r},"insert"),c=new M(a,e);try{c.addCharacters(a.selection,l)}catch{return t.preventDefault()}let[p,u]=a.selection,d=r.value.slice(0,p)+n+r.value.slice(u),E=this.postprocessor(c,r);if(E.value.length>s)return t.preventDefault();(d!==E.value||o.isContentEditable)&&(this.upcomingElementState=E,e.overwriteMode==="replace"&&d.length>s&&this.dispatchInputEvent({inputType:"insertText",data:n}))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}};var pt=(()=>{let t=class t{constructor(){this.elementRef=L(X).nativeElement,this.ngZone=L(Y),this.maskedElement=null,this.options=null,this.elementPredicate=ct;let e=L(O,{self:!0,optional:!0});if(e){let s=e.writeValue.bind(e);e.writeValue=o=>{s(this.options?W(String(o!=null?o:""),this.options):o)}}}ngOnChanges(){return $(this,null,function*(){let{elementPredicate:e,options:s,maskedElement:o,elementRef:r,ngZone:a}=this;if(o==null||o.destroy(),!s)return;let l=yield e(r);this.elementPredicate!==e||this.options!==s||a.runOutsideAngular(()=>{this.maskedElement=new R(l,s)})})}ngOnDestroy(){var e;(e=this.maskedElement)==null||e.destroy()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Q({type:t,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},features:[P]});let i=t;return i})();var kt=(i,t)=>({label:i,label_invalid:t}),Mt=(i,t)=>({"standart-input":i,"standart-input_inavlid":t});function Lt(i,t){if(i&1){let n=w();v(0,"button",8),I("click",function(){C(n),f();let s=U(4),o=f(2);return S(o.openPasword(s))}),A(1,"img",9),_()}}function Pt(i,t){if(i&1&&(v(0,"span",10),x(1),_()),i&2){let n=f(3);h(),F(n.errorMessage)}}function At(i,t){if(i&1){let n=w();N(0),v(1,"label",4),x(2),_(),v(3,"input",5,0),I("input",function(s){C(n);let o=f(2);return S(o.emitInput(s))}),_(),b(5,Lt,2,0,"button",6)(6,Pt,2,1,"span",7),B()}if(i&2){let n=f(2);h(),y("for",n.label),m("ngClass",j(12,kt,!n.invalid,n.invalid)),h(),F(n.label),h(),y("placeholder",n.placeholder),y("type",n.type),y("name",n.label),m("maskito",n.optionMask)("ngClass",j(15,Mt,!n.invalid,n.invalid))("readonly",n.readonly)("formControl",n.control),h(2),m("ngIf",n.openPassword),h(),m("ngIf",n.errorMessage)}}function Ft(i,t){if(i&1){let n=w();v(0,"button",8),I("click",function(){C(n),f();let s=U(4),o=f(2);return S(o.openPasword(s))}),A(1,"img",9),_()}}function Ot(i,t){if(i&1){let n=w();N(0),v(1,"label",11),x(2),_(),v(3,"input",12,0),I("input",function(s){C(n);let o=f(2);return S(o.emitInput(s))}),_(),b(5,Ft,2,0,"button",6),B()}if(i&2){let n=f(2);h(),y("for",n.label),h(),F(n.label),h(),y("placeholder",n.placeholder),y("type",n.type),y("name",n.label),m("readonly",n.readonly)("formControl",n.control),h(2),m("ngIf",n.openPassword)}}function Dt(i,t){if(i&1&&(v(0,"div",3),b(1,At,7,18,"ng-container",2)(2,Ot,6,8,"ng-container",2),_()),i&2){let n=f();h(),m("ngIf",!n.disabled),h(),m("ngIf",n.disabled)}}function Vt(i,t){i&1&&(v(0,"span"),x(1," \u0434\u043E\u0431\u0430\u0432\u044C\u0442\u0435 formControl - \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: "),A(2,"br"),x(3,` app-standart-input [control]="createSightForm.get('site')"
`),_())}var ee=(()=>{let t=class t{constructor(){this.type="",this.label="",this.placeholder="",this.readonly=!1,this.openPassword=!1,this.invalid=!1,this.disabled=!1,this.mask=new RegExp(""),this.optionMask={mask:this.mask},this.errorMessage="",this.changeInput=new q}emitInput(e){this.changeInput.emit(e)}renderMask(){this.maskType=="phone"&&(console.log("\u043C\u0430\u0441\u043A\u0430 \u0434\u043B\u044F \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430"),this.optionMask={mask:["+","7"," ","(",/\d/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]})}ngOnChanges(){}openPasword(e){e.type=e.type==="password"?"text":"password"}ngOnInit(){this.renderMask()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=J({type:t,selectors:[["app-standart-input"]],inputs:{control:"control",type:"type",label:"label",placeholder:"placeholder",readonly:"readonly",maskType:"maskType",openPassword:"openPassword",invalid:"invalid",disabled:"disabled",errorMessage:"errorMessage"},outputs:{changeInput:"changeInput"},features:[P],decls:2,vars:2,consts:[["input",""],["class","input-wrapper",4,"ngIf"],[4,"ngIf"],[1,"input-wrapper"],[3,"ngClass","for"],["name","new_name",3,"input","maskito","ngClass","readonly","placeholder","type","name","formControl"],["type","button","class","open-input",3,"click",4,"ngIf"],["class","error-message",4,"ngIf"],["type","button",1,"open-input",3,"click"],["src","/assets/icons/open-input.svg","alt","",1,"open-input-icon"],[1,"error-message"],[1,"label",3,"for"],["name","new_name",1,"standart-input_disabled",3,"input","readonly","placeholder","type","name","formControl"]],template:function(s,o){s&1&&b(0,Dt,3,2,"div",1)(1,Vt,4,0,"span",2),s&2&&(m("ngIf",o.control),h(),m("ngIf",!o.control))},dependencies:[st,tt,et,O,nt,it,pt],styles:[".standart-input[_ngcontent-%COMP%]{border:1px solid rgba(76,88,97,.2549019608);border-radius:5px;width:100%;min-height:2.25rem;font-size:12px;padding-left:.8rem;transition:.1s;margin-top:3px;color:#363d42;font-family:var(--font-regular);background:none}.standart-input_inavlid[_ngcontent-%COMP%]{border:1px solid #ff0000;border-radius:5px;width:100%;min-height:2.25rem;font-size:12px;padding-left:.8rem;margin-top:3px;background:none;transition:.1s;color:#363d42}.standart-input_inavlid[_ngcontent-%COMP%]:focus{outline:none;border-radius:5px;width:100%;min-height:2.25rem;margin-top:3px;transition:.2s;background:none;font-size:12px;padding-left:.8rem;transition:.1s;color:#363d42}.standart-input[_ngcontent-%COMP%]:focus{transition:.2s;outline:1px solid rgba(82,177,250,.6901960784);margin-top:3px;border-radius:5px;width:100%;background:none;min-height:2.25rem;font-size:12px;padding-left:.8rem;color:#363d42}.label[_ngcontent-%COMP%]{color:#4c5861;font-size:12px;padding-bottom:1px;font-family:var(--font-regular)}.label_invalid[_ngcontent-%COMP%]{color:red;font-size:12px;padding-bottom:1px}.error-message[_ngcontent-%COMP%]{color:red;display:flex;font-family:var(--font-regular);font-size:12px;padding-top:6px}.open-input[_ngcontent-%COMP%], .open-input[_ngcontent-%COMP%]:active{background:none;position:absolute;margin-left:-2rem;margin-top:.75rem}.open-input[_ngcontent-%COMP%]:active   .open-input-icon[_ngcontent-%COMP%], .open-input-icon[_ngcontent-%COMP%]:active{filter:brightness(0) saturate(100%) invert(20%) sepia(2%) saturate(3827%) hue-rotate(188deg) brightness(93%) contrast(92%)}.standart-input_disabled[_ngcontent-%COMP%]{border:none;pointer-events:none;border-radius:5px;width:100%;min-height:2.25rem;font-size:12px;background-color:#c0c0c071;padding-left:.8rem;transition:.1s;color:#51555896}"]});let i=t;return i})();export{ee as a};
