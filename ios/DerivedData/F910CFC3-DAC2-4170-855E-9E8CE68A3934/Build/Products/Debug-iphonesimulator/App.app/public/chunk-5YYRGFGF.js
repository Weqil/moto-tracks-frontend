import{c as T}from"./chunk-WSCMVZFT.js";import{a as A}from"./chunk-UB3WMOVF.js";import{a as O}from"./chunk-L3WJPVL4.js";import{a as k}from"./chunk-J3CYG6CI.js";import{a as N}from"./chunk-JRTDRGUG.js";import{a as q}from"./chunk-ANI5XEPI.js";import{c as B}from"./chunk-LB5WRDFC.js";import{a as U}from"./chunk-E7XUYOOL.js";import"./chunk-BSFBEI64.js";import{a as P}from"./chunk-QFO5OYTV.js";import"./chunk-GF6VGRIS.js";import{A as F,B as _,C as o,D as y,K as S,M as w,ba as D,x as t,z as M}from"./chunk-FYK4VEB7.js";import{Cb as C,D as g,Ha as r,Qa as E,V as d,bb as u,ib as s,jb as l,kb as n,rb as h}from"./chunk-LFIOHD3L.js";import"./chunk-UKLEBRLV.js";import"./chunk-5E46SPE4.js";import"./chunk-ACGYCHS3.js";import"./chunk-ZXFZWMZA.js";import"./chunk-F7XBNY6P.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-XODSA4YU.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-LNJ3S2LQ.js";var ee=(()=>{let p=class p{constructor(){this.navController=d(w),this.formErrors={name:{errorMessage:""},surname:{errorMessage:""},rank:{errorMessage:""},city:{errorMessage:""},startNumber:{errorMessage:""}},this.userService=d(P),this.toastService=d(A),this.loaderService=d(k),this.personalUserForm=new F({name:new o("",[t.required]),surname:new o("",[t.required]),patronymic:new o("",[t.required]),dateOfBirth:new o("",[t.required]),city:new o("",[t.required]),inn:new o("",[t.required]),snils:new o("",[t.required]),phoneNumber:new o("",[t.required]),startNumber:new o("",[t.required]),group:new o("",[t.required]),rank:new o("",[t.required]),rankNumber:new o("",[t.required]),community:new o("",[t.required]),coach:new o("",[t.required]),motoStamp:new o("",[t.required]),engine:new o("",[t.required]),email:new o("",[t.required])})}submitValidate(){let i=!0;return Object.keys(this.personalUserForm.controls).forEach(a=>{this.personalUserForm.get(a).valid?this.formErrors[a]&&(this.formErrors[a].errorMessage=""):this.formErrors[a]&&(this.formErrors[a].errorMessage="\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435",i=!1)}),i}submitForm(){var i;console.log(this.submitValidate()),this.submitValidate()?(this.loaderService.showLoading(),(i=this.userService.user.value)!=null&&i.personal?this.userService.updatePersonalInfo(this.personalUserForm.value).pipe(g(()=>{this.loaderService.hideLoading()})).subscribe(a=>{this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u044B","success"),this.userService.refreshUser(),this.navController.back()}):this.userService.createPersonalInfo(this.personalUserForm.value).pipe(g(()=>{this.loaderService.hideLoading()})).subscribe(a=>{this.toastService.showToast("\u0414\u0430\u043D\u043D\u044B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B","success"),this.userService.refreshUser(),this.navController.back()})):this.toastService.showToast("\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F - \u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0438\u043C\u044F, \u0430\u0434\u0440\u0435\u0441, \u0441\u043F\u043E\u0440\u0442\u0438\u0432\u043D\u043E\u0435 \u0437\u0432\u0430\u043D\u0438\u0435","danger")}cancelEdit(){this.navController.back()}ionViewWillEnter(){var i,a,e,m,v,f,b;this.userService.refreshUser(),(i=this.userService.user.value)!=null&&i.personal?(this.personalUserForm.patchValue((a=this.userService.user.value)==null?void 0:a.personal),this.personalUserForm.patchValue({dateOfBirth:(e=this.userService.user.value)==null?void 0:e.personal.date_of_birth,phoneNumber:(m=this.userService.user.value)==null?void 0:m.personal.phone_number,startNumber:(v=this.userService.user.value)==null?void 0:v.personal.start_number,rankNumber:(f=this.userService.user.value)==null?void 0:f.personal.rank_number,motoStamp:(b=this.userService.user.value)==null?void 0:b.personal.moto_stamp}),console.log(this.personalUserForm.value)):this.personalUserForm.reset()}ngOnInit(){}};p.\u0275fac=function(a){return new(a||p)},p.\u0275cmp=E({type:p,selectors:[["app-personal-info"]],decls:34,vars:34,consts:[["headerTitle","\u041F\u0440\u043E\u0444\u0438\u043B\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430"],[1,"main-container--with-header"],[1,"document-header"],[1,"document-container"],[1,"up-container"],[1,"user-section__avatar"],["alt","",1,"user-section__avatar__img",3,"src"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043C\u044F","label","\u0418\u043C\u044F",1,"up-container__input",3,"control","errorMessage","invalid"],[1,"bottom-container"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email","label","Email",1,"bottom-container__standart",3,"control","errorMessage","invalid"],["buttonText","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",3,"disabled"],[1,"personal-form"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u043C\u0438\u043B\u0438\u044E","label","\u0424\u0430\u043C\u0438\u043B\u0438\u044F",3,"control","errorMessage","invalid"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F","label","\u0418\u043C\u044F",3,"control","errorMessage","invalid"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u0442\u0447\u0435\u0441\u0442\u0432\u043E","label","\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E",3,"control"],["placeholder","\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443","label","\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F","type","date",3,"control"],["placeholder","\u0413\u043E\u0440\u043E\u0434 (\u043A\u0440\u0430\u0439, \u043E\u0431\u043B\u0430\u0441\u0442\u044C, \u0440\u0435\u0433\u0438\u043E\u043D)","label","\u0413\u043E\u0440\u043E\u0434",3,"control","invalid","errorMessage"],[1,"start-number-container"],["placeholder","\u0418\u041D\u041D","label","\u0418\u041D\u041D",3,"control"],["placeholder","\u0421\u041D\u0418\u041B\u0421","label","\u0421\u041D\u0418\u041B\u0421",3,"control"],["placeholder","\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","label","\u0422\u0435\u043B\u0435\u0444\u043E\u043D",3,"control"],["placeholder","\u0421\u0442\u0430\u0440\u0442\u043E\u0432\u044B\u0439 \u043D\u043E\u043C\u0435\u0440","label","\u0421\u0442\u0430\u0440\u0442\u043E\u0432\u044B\u0439 \u043D\u043E\u043C\u0435\u0440",3,"control","invalid","errorMessage"],["placeholder","\u041A\u043B\u0430\u0441\u0441 (\u0433\u0440\u0443\u043F\u043F\u0430)","label","\u041A\u043B\u0430\u0441\u0441",3,"control"],["placeholder","\u0421\u043F\u043E\u0440\u0442\u0438\u0432\u043D\u043E\u0435 \u0437\u0432\u0430\u043D\u0438\u0435, \u0440\u0430\u0437\u0440\u044F\u0434","label","\u0421\u043F\u043E\u0440\u0442\u0438\u0432\u043D\u043E\u0435 \u0437\u0432\u0430\u043D\u0438\u0435",3,"control","invalid","errorMessage"],["placeholder","\u2116 \u0443\u0434\u043E\u0441\u0442\u043E\u0432\u0435\u0440\u0435\u043D\u0438\u044F (\u041C\u0421\u041C\u041A, \u041C\u0421, \u041A\u041C\u0421)","label","\u2116 \u0443\u0434\u043E\u0441\u0442\u043E\u0432\u0435\u0440\u0435\u043D\u0438\u044F",3,"control"],["placeholder","\u041A\u043E\u043C\u0430\u043D\u0434\u0430","label","\u041D\u0430\u0432\u0437\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B",3,"control"],["placeholder","\u0422\u0440\u0435\u043D\u0435\u0440","label","\u0424\u0418\u041E \u0442\u0440\u0435\u043D\u0435\u0440\u0430",3,"control"],["placeholder","\u041C\u0430\u0440\u043A\u0430 \u043C\u043E\u0442\u043E\u0446\u0438\u043A\u043B\u0430","label","\u041C\u043E\u0442\u043E\u0446\u0438\u043A\u043B",3,"control"],["placeholder","\u0414\u0432\u0438\u0433\u0430\u0442\u0435\u043B\u044C \u043C\u043E\u0442\u043E\u0446\u0438\u043A\u043B\u0430","label","\u0414\u0432\u0438\u0433\u0430\u0442\u0435\u043B\u044C",3,"control"],["buttonText","\u041E\u0442\u043C\u0435\u043D\u0430",3,"click","disabled"],["buttonText","\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",3,"click"]],template:function(a,e){a&1&&(s(0,"ion-content"),n(1,"app-header",0),s(2,"div",1)(3,"div",2),C(4,"\u041B\u0438\u0446\u0435\u043D\u0437\u0438\u0438"),l(),s(5,"div",3)(6,"div",4)(7,"div",5),n(8,"img",6),l(),n(9,"app-standart-input",7),l(),s(10,"div",8),n(11,"app-standart-input",9),l()(),n(12,"app-standart-button",10),s(13,"form",11),n(14,"app-standart-input",12)(15,"app-standart-input",13)(16,"app-standart-input",14)(17,"app-standart-input",15)(18,"app-standart-input",16),s(19,"div",17),n(20,"app-standart-input",18)(21,"app-standart-input",19),l(),n(22,"app-standart-input",20),s(23,"div",17),n(24,"app-standart-input",21)(25,"app-standart-input",22),l(),n(26,"app-standart-input",23)(27,"app-standart-input",24)(28,"app-standart-input",25)(29,"app-standart-input",26)(30,"app-standart-input",27)(31,"app-standart-input",28),s(32,"app-standart-button",29),h("click",function(){return e.cancelEdit()}),l(),s(33,"app-standart-button",30),h("click",function(){return e.submitForm()}),l()()()()),a&2&&(r(9),u("control",e.personalUserForm.get("name"))("errorMessage",e.formErrors.name.errorMessage)("invalid",e.formErrors.name.errorMessage.length!==0),r(2),u("control",e.personalUserForm.get("email"))("errorMessage",e.formErrors.surname.errorMessage)("invalid",e.formErrors.surname.errorMessage.length!==0),r(),u("disabled",!0),r(2),u("control",e.personalUserForm.get("surname"))("errorMessage",e.formErrors.surname.errorMessage)("invalid",e.formErrors.surname.errorMessage.length!==0),r(),u("control",e.personalUserForm.get("name"))("errorMessage",e.formErrors.name.errorMessage)("invalid",e.formErrors.name.errorMessage.length!==0),r(),u("control",e.personalUserForm.get("patronymic")),r(),u("control",e.personalUserForm.get("dateOfBirth")),r(),u("control",e.personalUserForm.get("city"))("invalid",e.formErrors.city.errorMessage.length!==0)("errorMessage",e.formErrors.city.errorMessage),r(2),u("control",e.personalUserForm.get("inn")),r(),u("control",e.personalUserForm.get("snils")),r(),u("control",e.personalUserForm.get("phoneNumber")),r(2),u("control",e.personalUserForm.get("startNumber"))("invalid",e.formErrors.startNumber.errorMessage.length!==0)("errorMessage",e.formErrors.startNumber.errorMessage),r(),u("control",e.personalUserForm.get("group")),r(),u("control",e.personalUserForm.get("rank"))("invalid",e.formErrors.rank.errorMessage.length!==0)("errorMessage",e.formErrors.rank.errorMessage),r(),u("control",e.personalUserForm.get("rankNumber")),r(),u("control",e.personalUserForm.get("community")),r(),u("control",e.personalUserForm.get("coach")),r(),u("control",e.personalUserForm.get("motoStamp")),r(),u("control",e.personalUserForm.get("engine")),r(),u("disabled",!0))},dependencies:[T,O,S,y,M,U,D,_,N,q,B],styles:[".personal-form[_ngcontent-%COMP%]{padding-top:var(--standart-padding);display:flex;flex-direction:column;gap:var(--standart-padding);padding-bottom:var(--standart-padding)}.start-number-container[_ngcontent-%COMP%]{display:flex;gap:10px}.document-container[_ngcontent-%COMP%]{padding-top:var(--standart-padding);border:1px solid rgba(76,88,97,.2549019608);padding:var(--standart-padding);margin-bottom:var(--little-padding);display:flex;border-radius:5px;gap:var(--little-padding);flex-direction:column}.document-header[_ngcontent-%COMP%]{padding-top:1rem;font-family:var(--font-bold);font-size:var(--font-regular-size);padding-bottom:var(--little-padding)}.user-section__avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.user-section__avatar[_ngcontent-%COMP%]   .user-section__avatar__img[_ngcontent-%COMP%]{min-width:4rem;min-height:4rem;max-width:4rem;max-height:4rem;object-fit:cover;overflow:hidden;background-color:#636363;border-radius:50%}.bottom-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-around}.up-container__input[_ngcontent-%COMP%]{margin-left:var(--little-margin);width:100%}.document-container[_ngcontent-%COMP%]{min-height:150px;margin-bottom:10px}.up-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between}"]});let c=p;return c})();export{ee as PersonalInfoComponent};
