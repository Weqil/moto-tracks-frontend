import{a as W}from"./chunk-UB3WMOVF.js";import{a as G,b as H,f as J}from"./chunk-LB5WRDFC.js";import{a as A}from"./chunk-GF6VGRIS.js";import{d as F,e as P,h as w}from"./chunk-FYK4VEB7.js";import{$ as S,Ab as E,Bb as x,Cb as y,Eb as $,Gb as K,Ha as l,Ia as L,P as z,Q as B,Qa as k,Ra as R,Wa as u,aa as h,ba as v,bb as d,ga as D,ib as c,jb as p,ka as Q,kb as f,lb as g,mb as _,ob as b,rb as C,sb as m,tb as I,ub as T,wb as U,xb as q,yb as O,zb as M}from"./chunk-LFIOHD3L.js";var ne=["*"],X=(()=>{let i=class i{constructor(){}ngOnInit(){}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=k({type:i,selectors:[["app-step-container-item"]],inputs:{stepCurrency:"stepCurrency",maxStepsCount:"maxStepsCount"},ngContentSelectors:ne,decls:1,vars:0,template:function(r,o){r&1&&(I(),T(0))},styles:[".step-count[_ngcontent-%COMP%]{display:flex;justify-content:center;color:#000;font-size:1.25rem;padding-top:2.5rem;font-family:var(--font-bold)}"]});let e=i;return e})();var oe=["*"],ae=()=>[];function ce(e,i){if(e&1&&(g(0),c(1,"div",4),y(2),p(),_()),e&2){let n=m().index;l(2),$(" ",n+1," ")}}function se(e,i){if(e&1&&(g(0),c(1,"div",5),y(2),p(),_()),e&2){let n=m().index;l(2),$(" ",n+1," ")}}function le(e,i){if(e&1&&(g(0),u(1,ce,3,1,"ng-container",3)(2,se,3,1,"ng-container",3),_()),e&2){let n=i.index,t=m(2);l(),d("ngIf",n+1!==t.stepCurrency),l(),d("ngIf",n+1===t.stepCurrency)}}function pe(e,i){if(e&1&&(c(0,"div",1),u(1,le,3,2,"ng-container",2),p()),e&2){let n=m();l(),d("ngForOf",K(1,ae).constructor(n.maxStepsCount))}}var Y=(()=>{let i=class i{constructor(){this.stepCurrency=1,this.maxStepsCount=4,this.stepsToNative=[]}ngAfterViewInit(){this.steps.toArray().forEach(t=>{this.stepsToNative.push(t.nativeElement)}),this.render()}ngOnChanges(){this.stepCurrency<=Number(this.maxStepsCount)&&this.render()}render(){this.stepsToNative.forEach(t=>{Number(t.getAttribute("stepNum"))==this.stepCurrency?t.style.display="block":t.style.display="none"})}ngOnInit(){}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=k({type:i,selectors:[["app-step-container"]],contentQueries:function(r,o,s){if(r&1&&U(s,X,4,Q),r&2){let a;O(a=M())&&(o.steps=a)}},inputs:{stepCurrency:"stepCurrency",maxStepsCount:"maxStepsCount"},features:[S],ngContentSelectors:oe,decls:2,vars:1,consts:[["class","circles-grid",4,"ngIf"],[1,"circles-grid"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"step-circle"],[1,"step-circle__active"]],template:function(r,o){r&1&&(I(),u(0,pe,2,2,"div",0),T(1)),r&2&&d("ngIf",o.maxStepsCount!==1)},dependencies:[w,F,P],styles:[".step-circle[_ngcontent-%COMP%]{width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;font-family:var(--font-light);border-radius:50%;background-color:#fff;box-shadow:0 5px 10px 2px #223c508c}.step-circle__active[_ngcontent-%COMP%]{width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;font-family:var(--font-light);border-radius:50%;box-shadow:0 5px 10px 2px #223c508c;color:#fff;background-color:#3880ff}.circles-grid[_ngcontent-%COMP%]{margin:auto;display:flex;align-items:center;justify-content:center;padding-top:1rem;gap:1rem;padding-bottom:1rem}"]});let e=i;return e})();var Le=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=R({type:i}),i.\u0275inj=B({imports:[w,Y]});let e=i;return e})();var Z=(()=>{let i=class i{constructor(){this.backendUrl=`${A.BACKEND_URL}:${A.BACKEND_PORT}`}checkLinkFile(t){return t&&t.link.includes("https")?t.link:`${this.backendUrl}${t.link}`}checkLinkString(t){return t&&t.includes("https")?t:`${this.backendUrl}${t}`}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var me=["mainPhoto"];function ue(e,i){if(e&1&&(c(0,"div",11,1),f(2,"app-back-button"),p()),e&2){let n=m(2);x("background-image: url(",n.previews[0].link,");")}}function fe(e,i){e&1&&(c(0,"div",12),f(1,"app-back-button"),p())}function ge(e,i){if(e&1&&(c(0,"div",11),f(1,"app-back-button"),p()),e&2){let n=m(2);x("background-image: url('",n.fileService.checkLinkString(n.categoryType.image_path),"') ;")}}function _e(e,i){if(e&1){let n=b();c(0,"div",13),C("click",function(r){h(n);let o=m(2);return v(o.setMainPhoto(r))}),c(1,"div",14)(2,"app-circle-button",15),C("click",function(){let r=h(n),o=r.$implicit,s=r.index,a=m(2);return v(a.deletePreview(o,s))}),p()()()}if(e&2){let n=i.$implicit;x("background-image: url(",n.link,");")}}function he(e,i){if(e&1){let n=b();g(0),u(1,ue,3,3,"div",3)(2,fe,2,0,"div",4)(3,ge,2,3,"div",3),c(4,"div",5)(5,"div",6),C("click",function(){h(n);let r=E(11);return v(r.click())}),f(6,"img",7),c(7,"span",8),y(8,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E"),p()(),u(9,_e,3,3,"div",9),p(),c(10,"input",10,0),C("change",function(r){h(n);let o=E(11),s=m();return v(s.fileChanged(r,o))}),p(),_()}if(e&2){let n=m();l(),d("ngIf",n.previews.length>0),l(),d("ngIf",n.previews.length==0&&!n.categoryType),l(),d("ngIf",n.previews.length==0&&n.categoryType&&n.categoryType.image_path),l(6),d("ngForOf",n.previews)}}function ve(e,i){if(e&1&&f(0,"div",21),e&2){let n=m(2);x("background-image: url(",n.previews[0].link,") ;")}}function Ce(e,i){e&1&&f(0,"div",22)}function xe(e,i){if(e&1&&f(0,"div",21),e&2){let n=m(2);x("background-image: url('",n.fileService.checkLinkString(n.categoryType.image_path),"') ;")}}function ye(e,i){if(e&1){let n=b();c(0,"div",23)(1,"div",14)(2,"app-circle-button",15),C("click",function(){let r=h(n),o=r.$implicit,s=r.index,a=m(2);return v(a.deletePreview(o,s))}),p()()()}if(e&2){let n=i.$implicit;x("background-image: url(",n.link,");")}}function ke(e,i){if(e&1){let n=b();g(0),c(1,"div",16),y(2,"\u041E\u0431\u043B\u043E\u0436\u043A\u0430"),p(),u(3,ve,1,3,"div",17)(4,Ce,1,0,"div",18)(5,xe,1,3,"div",17),c(6,"div",16),y(7,"\u0424\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438"),p(),c(8,"div",19)(9,"div",6),C("click",function(){h(n);let r=E(15);return v(r.click())}),f(10,"img",7),c(11,"span",8),y(12,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E"),p()(),u(13,ye,3,3,"div",20),p(),c(14,"input",10,0),C("change",function(r){h(n);let o=E(15),s=m();return v(s.fileChanged(r,o))}),p(),_()}if(e&2){let n=m();l(3),d("ngIf",n.previews[0]),l(),d("ngIf",n.previews.length==0&&!n.categoryType),l(),d("ngIf",n.previews.length==0&&n.categoryType&&n.categoryType.image_path),l(8),d("ngForOf",n.previews)}}function we(e,i){if(e&1&&(g(0),f(1,"div",23),_()),e&2){let n=i.$implicit;l(),x("background-image: url(",n.link,");")}}function be(e,i){if(e&1&&(g(0),c(1,"div",5),u(2,we,2,3,"ng-container",24),p(),_()),e&2){let n=m();l(2),d("ngForOf",n.previews)}}var We=(()=>{let i=class i{constructor(t,r){this.toastService=t,this.fileService=r,this.files=[],this.filesEmit=new D,this.deleteVkfilesEmit=new D,this.type="",this.vkFiles=[],this.hideLSlider=!1,this.previews=[],this.deleteFiles=[]}ngOnChanges(t){let r=this.previews.length;if(t.vkFiles){for(let o=0;o<r;o++)this.previews[o]&&this.previews[o].vk&&this.previews.splice(o);this.previews.push(...this.vkFiles)}}deleteVkFiles(t){this.deleteVkfilesEmit.emit(t)}fileChanged(t,r){let s=Array.from(t.target.files).map(a=>new Promise((ee,te)=>{let j=new FileReader;j.onload=N=>{this.files.map(ie=>ie.name).indexOf(a.name)===-1?(this.previews.push({link:N.target.result,name:a.name}),this.files.push(a)):this.toastService.showToast("\u0424\u0430\u0439\u043B \u0443\u0436\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D!","warning"),ee()},j.onerror=N=>{te(N)},j.readAsDataURL(a)}));Promise.all(s).then(()=>{t.target.value=null,this.filesEmit.emit(this.files)}).catch(a=>{console.error("Error reading files",a)})}setMainPhoto(t){t.target.style.backgroundImage&&(this.mainPhoto.nativeElement.style.backgroundImage=t.target.style.backgroundImage)}deletePreview(t,r){if(t.vk)this.vkFiles.find(s=>s.name===t.name)&&(this.deleteVkFiles(t),this.previews=this.previews.filter(s=>s.name!==t.name));else if(t.id)this.previews=this.previews.filter(o=>o.id!==t.id),this.files.find(o=>o.id===t.id).on_delete=!0,this.filesEmit.emit(this.files);else{let o=this.files.map(a=>a.name).indexOf(t.name),s=this.files.find(a=>a.name===t.name);this.files=this.files.filter(a=>a.name!==t.name),this.previews=this.previews.filter(a=>a.name!==t.name),this.filesEmit.emit(this.files)}}ngOnInit(){this.files&&this.files.forEach(t=>{let r=this.fileService.checkLinkFile(t);r!==""&&this.previews.push({id:t.id,link:r,name:t.name})})}};i.\u0275fac=function(r){return new(r||i)(L(W),L(Z))},i.\u0275cmp=k({type:i,selectors:[["app-edit-slider"]],viewQuery:function(r,o){if(r&1&&q(me,5),r&2){let s;O(s=M())&&(o.mainPhoto=s.first)}},inputs:{files:"files",type:"type",categoryType:"categoryType",vkFiles:"vkFiles",hideLSlider:"hideLSlider"},outputs:{filesEmit:"filesEmit",deleteVkfilesEmit:"deleteVkfilesEmit"},features:[S],decls:3,vars:3,consts:[["file",""],["mainPhoto",""],[4,"ngIf"],["class","main-photo",3,"style",4,"ngIf"],["style","background-image: url('assets/images/nophoto.jpg') ;","class","main-photo",4,"ngIf"],[1,"slider-container"],[1,"slider-container-add-button",3,"click"],["src","/assets/icons/addPhoto.svg","alt",""],[1,"slider-container-add-button_text"],["class","slider-container-item",3,"style","click",4,"ngFor","ngForOf"],["multiple","multiple","type","file","accept","image/*,video/*",2,"opacity","0","position","absolute",3,"change"],[1,"main-photo"],[1,"main-photo",2,"background-image","url('assets/images/nophoto.jpg')"],[1,"slider-container-item",3,"click"],[1,"delete-button-wrapper"],["icon","/assets/icons/trash.svg",3,"click"],[1,"label"],["class","cover-add-button",3,"style",4,"ngIf"],["style","background-image: url('assets/images/nophoto.jpg') ;","class","cover-add-button",4,"ngIf"],[1,"slider-container_create"],["class","slider-container-item",3,"style",4,"ngFor","ngForOf"],[1,"cover-add-button"],[1,"cover-add-button",2,"background-image","url('assets/images/nophoto.jpg')"],[1,"slider-container-item"],[4,"ngFor","ngForOf"]],template:function(r,o){r&1&&u(0,he,12,4,"ng-container",2)(1,ke,16,4,"ng-container",2)(2,be,3,1,"ng-container",2),r&2&&(d("ngIf",o.type===""),l(),d("ngIf",o.type==="create"),l(),d("ngIf",o.type==="l-view"&&!o.hideLSlider))},dependencies:[w,F,P,J,G,H],styles:['@charset "UTF-8";.main-photo[_ngcontent-%COMP%], .main-photo_create[_ngcontent-%COMP%]{padding:2rem 1rem 1.1rem;display:flex;background-size:cover;background-position:center;width:100%;min-height:12.625rem;border-radius:0px 0px 1.5rem 1.5rem}.header-tools_xxl[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-family:var(--font-bold);display:flex;width:100%}.cover-add-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;background-size:cover;background-position:center;flex-direction:column;border-radius:5px;min-width:6.625rem;margin-bottom:.5rem;background-color:#dce9ff}.cover-add-button_text[_ngcontent-%COMP%]{color:var(--blue-color);font-size:.7rem}.label[_ngcontent-%COMP%]{color:#4c5861;font-size:12px;margin-bottom:6px;font-family:var(--font-regular)}.slider-container[_ngcontent-%COMP%]{padding-left:1rem;max-width:100%;padding-top:1.25rem;gap:.4rem;display:flex;padding-right:1rem;overflow-x:auto}.slider-container_create[_ngcontent-%COMP%]{max-width:100%;gap:.4rem;display:flex;padding-right:1rem;overflow-x:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px;background:transparent}.slider-container-item[_ngcontent-%COMP%]{min-width:7.7rem;height:5rem;border-radius:5px;background-size:cover;background-position:center}.slider-container-add-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:5rem;flex-direction:column;border-radius:5px;min-width:6.625rem;background-color:#dce9ff}.slider-container-add-button_text[_ngcontent-%COMP%]{color:var(--blue-color);font-size:.7rem}.delete-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:end;padding-top:.5rem;padding-right:.3rem}']});let e=i;return e})();export{X as a,Y as b,Le as c,We as d};
